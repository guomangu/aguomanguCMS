{% extends 'base.html.twig' %}

{% block title %}{{ page.title }}{% endblock %}

{% block body %}
    
    {# Appel du composant. On passe le titre en attribut. #}
    <twig:WikiCard title="{{ page.title }}" backUrl="/admin">
        
        {% block content %}
            {# Tout ce qui est ici va aller dans le corps de la card #}
            
            {# Si tu as une image de couverture #}
            {% if page.image %}
                <img src="{{ page.image }}" class="w-full h-64 object-cover rounded mb-6 shadow-sm" alt="Cover">
            {% endif %}

            {# Le contenu Trix (HTML) #}
            {# <div class="prose max-w-none">
                {{ page.content|raw }}
            </div> #}

            {# --- BOUTON DELETE (Invisible pour les visiteurs si tu ajoutes une condition is_granted) --- #}
            <div class="flex justify-end mb-4">
                <form method="post" action="{{ path('app_wiki_delete', {'id': page.id}) }}" onsubmit="return confirm('S√ªr de vouloir supprimer √ßa ?');">
                    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ page.id) }}">
                    <button class="text-red-500 hover:text-red-700 text-sm font-bold underline">
                        Supprimer cette page üóëÔ∏è
                    </button>
                </form>
            </div>
        {% endblock %}

    </twig:WikiCard>

{% endblock %}